package com.malware98.brokenpath.capabilities;

import java.util.Map;
import net.minecraft.nbt.CompoundTag;
import net.minecraftforge.common.util.INBTSerializable;

public interface IPlayerStats extends INBTSerializable<CompoundTag> {

    // Métodos de estado de combate
    long getLastCombatTick();
    void setLastCombatTick(long tick);
    boolean isInCombat(long currentTick);
    void enterCombat(long currentTick);
    void exitCombat();
    long getLastCombatExitTick();

    // Métodos de Atributos Fundamentales
    int getAttributePoints();
    void setAttributePoints(int points);
    void addAttributePoints(int amount);
    int getConstitution();
    void setConstitution(int constitution);
    int getStrength();
    void setStrength(int strength);
    int getDexterity();
    void setDexterity(int dexterity);
    int getIntelligence();
    void setIntelligence(int intelligence);

    // Procedimiento para gastar puntos de Atributo
    boolean spendAttributePoints(String attributeName, int amount);

    // Datos Raza, Clase y Especialización
    String getRace();
    void setRace(String race);
    String getPlayerClass();
    void setPlayerClass(String playerClass);
    String getSpecialization();
    void setSpecialization(String specialization);

    // Puntos de maestría (Para las habilidades de clase y habilidades de Profesiones)
    int getSkillPoints();
    void addSkillPoints(int amount);
    void spendSkillPoints(int amount);

    // Métodos de Profesiones
    Map<String, Integer> getProfessions();
    void setProfessions(Map<String, Integer> professions);
    int getProfessionLevel(String professionName);
    void setProfessionLevel(String professionName, int level);
    void addOrUpdateProfession(String professionName, int level);
    void removeProfession(String professionName);

    // Implementación primaria de Estadísticas (Getters and Setters para valores calculados)

    // Métodos para Salud
    float getCurrentHealth();
    void setCurrentHealth(float health);
    void setCurrentHealth(float health, boolean doSync);
    float getMaxHealth();
    void setMaxHealth(float maxHealth);
    void setMaxHealth(float maxHealth, boolean doSync);

    // Métodos para Protección (basada en STR)
    float getCurrentProtection();
    void setCurrentProtection(float protection);
    void setCurrentProtection(float protection, boolean doSync);
    float getMaxProtection();
    void setMaxProtection(float maxProtection);
    void setMaxProtection(float maxProtection, boolean doSync);

    // Métodos para Protección Innata
    float getCurrentInnateProtection();
    void setCurrentInnateProtection(float innateProtection);
    void setCurrentInnateProtection(float innateProtection, boolean doSync);
    float getMaxInnateProtection();
    void setMaxInnateProtection(float maxInnateProtection);
    void setMaxInnateProtection(float maxInnateProtection, boolean doSync);

    // Métodos para Maná
    float getCurrentMana();
    void setCurrentMana(float mana);
    void setCurrentMana(float mana, boolean doSync);
    float getMaxMana();
    void setMaxMana(float maxMana);
    void setMaxMana(float maxMana, boolean doSync);

    // Métodos para Vigor
    float getCurrentVigor();
    void setCurrentVigor(float vigor);
    void setCurrentVigor(float vigor, boolean doSync);
    float getMaxVigor();
    void setMaxVigor(float maxVigor);
    void setMaxVigor(float maxVigor, boolean doSync);

    float getFavor();
    void setFavor(float favor);
    void addFavor(float amount);

    // Métodos de reset para Datos
    void resetData();
    void resetClassSpecificData();

    // Procedimiento para la Capability
    void copyFrom(IPlayerStats source);

    // Procedimiento para sincronizar XP y Nivel
    void sync();

    // Método para recalcular todas las estadísticas máximas (salud, maná, vigor, protección)
    void recalculateStats();

    // Métodos de suerte
    float getFavorBonusMultiplier();
    void setFavorBonusMultiplier(float multiplier);
    void applyFavorModifier(String actionKey);

    // Bonificación a la Regeneración de Vida por CON
    float getRegenSpeedBonusTicks();

    // Activación de Efectos de Regeneración en estadísticas Personalizadas
    void restoreProtection(float amount); // Para Protección STR-basada
    void restoreMana(float amount);
    void restoreVigor(float amount);

    // Restaurar Protección Innata
    void restoreInnateProtection(float amount);

    // Obtiene el nivel actual de hambre penalizada del jugador. Niveles 0,1,2,3
    int getHungerStage();
    void setHungerStage(int hungerStage);

    // Métodos para el consumo continuo de Maná y Vigor
    void setManaBeingConsumed(boolean consuming);
    boolean isManaBeingConsumed();
    void setVigorBeingConsumed(boolean consuming);
    boolean isVigorBeingConsumed();
}
