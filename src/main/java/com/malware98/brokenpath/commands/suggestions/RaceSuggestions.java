package com.malware98.brokenpath.commands.suggestions;

import com.malware98.brokenpath.data.config.RaceDataConfig;
import com.mojang.brigadier.context.CommandContext;
import com.mojang.brigadier.suggestion.SuggestionProvider;
import com.mojang.brigadier.suggestion.Suggestions;
import com.mojang.brigadier.suggestion.SuggestionsBuilder;
import net.minecraft.commands.CommandSourceStack;

import java.util.Locale;
import java.util.concurrent.CompletableFuture;

/**
 * Provides autocomplete suggestions for race names used in mod commands.
 */
public class RaceSuggestions implements SuggestionProvider<CommandSourceStack> {

    // --- Singleton Instance ---
    public static final RaceSuggestions INSTANCE = new RaceSuggestions();

    // --- Suggestion Provider Method ---
    /**
     * Retrieves and builds suggestions for race names.
     * @param context The command context.
     * @param builder The suggestions builder to populate.
     * @return A CompletableFuture containing the built suggestions.
     */
    @Override
    public CompletableFuture<Suggestions> getSuggestions(CommandContext<CommandSourceStack> context, SuggestionsBuilder builder) {
        for (String raceName : RaceDataConfig.getInstance().raceSettings.keySet()) {
            builder.suggest(raceName.toLowerCase(Locale.ROOT));
        }
        return builder.buildFuture();
    }
}