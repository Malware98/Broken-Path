package com.malware98.brokenpath.util;

import com.malware98.brokenpath.capabilities.IPlayerStats;
import com.malware98.brokenpath.capabilities.registries.ModCapabilities;
import net.minecraft.world.entity.player.Player;
import net.minecraftforge.common.util.LazyOptional;
import net.minecraftforge.common.util.NonNullConsumer;

/**
 * Utility class for handling player capability operations within the mod.
 * Simplifies access and interaction with player statistics capabilities.
 */
public class CapabilityUtils {

    // --- Capability Retrieval Routines ---

    /**
     * Retrieves the IPlayerStats capability for a given player.
     * @param player The player entity.
     * @return A LazyOptional containing the IPlayerStats capability, if present.
     */
    public static LazyOptional<IPlayerStats> getPlayerStats(Player player) {
        // Obtains the player's custom stats' capability.
        return player.getCapability(ModCapabilities.PLAYER_DATA_CAPABILITY);
    }

    /**
     * Executes a consumer if the IPlayerStats capability is present on the player.
     * This avoids direct null checks and handles the LazyOptional safely.
     * @param player The player entity.
     * @param consumer A consumer to execute with the IPlayerStats instance.
     */
    public static void ifPlayerStatsPresent(Player player, NonNullConsumer<IPlayerStats> consumer) {
        // Safely performs an action if the capability is available.
        getPlayerStats(player).ifPresent(consumer);
    }
}